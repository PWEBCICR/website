version: '3.7'

services:
 github-action-sql:
  image: mysql:5.7
  container_name : 'github-action-sql'
  restart : unless-stopped
  environment:
   MYSQL_DATABASE: ${DATABASE_NAME}
   MYSQL_ROOT_PASSWORD: ${DATABASE_PASSWORD}
   MYSQL_PASSWORD: ${DATABASE_PASSWORD}
   MYSQL_USER: ${DATABASE_USERNAME}
  volumes:
    - /home/github/N4P/sql-volume:/var/lib/mysql
  ports:
    - 3309:3306

 github-action-app:
  image: netw4ppl/website:latest
  container_name : 'github-action-app'
  volumes :
   - ./src/:/var/www/html/
   - /etc/apache2/sites-available/docker_config.conf:/etc/apache2/sites-available/000-default.conf
  ports:
   - 7080:80
   - 7443:443
  
 github-action-redis:
   image: redis:6-alpine
   container_name : 'github-action-redis'
   ports:
    - 6379:6379
