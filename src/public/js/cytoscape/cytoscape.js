"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[896],{9920:(e,t,n)=>{n.d(t,{v:()=>a});var a={name:"avsdf",animate:"end",animationDuration:1e3,animationEasing:"ease-in-out",fit:!0,nodeSeparation:120,padding:30}},9866:(e,t,n)=>{n.d(t,{v:()=>a});var a={name:"breadthfirst",fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!0,roots:void 0,maximal:!0,animate:!0,animationDuration:1e3,animationEasing:"ease-in-out",animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}}},4936:(e,t,n)=>{n.d(t,{v:()=>a});var a={name:"cise",animate:"end",animationDuration:1e3,animationEasing:"ease-in-out",fit:!0,padding:30,nodeSeparation:20,idealInterClusterEdgeLengthCoefficient:1.4,allowNodesInsideCircle:!1,maxRatioOfNodesInsideCircle:.1,springCoeff:.45,nodeRepulsion:4500,gravity:.25,gravityRange:3.8,ready:function(){},stop:function(){}}},9367:(e,t,n)=>{n.d(t,{v:()=>a});var a={name:"dagre",nodeSep:25,edgeSep:10,rankSep:25,rankDir:"TB",ranker:"longest-path",minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:50,spacingFactor:1.5,nodeDimensionsIncludeLabels:!0,animate:!0,animateFilter:function(e,t){return!0},animationDuration:1e3,animationEasing:"ease-in-out",boundingBox:void 0,transform:function(e,t){return t},ready:function(){},stop:function(){}}},6293:(e,t,n)=>{n.d(t,{v:()=>a});var a={name:"fcose",quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:"ease-in-out",fit:!0,padding:30,nodeDimensionsIncludeLabels:!0,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:100,piTol:1e-7,nodeRepulsion:function(e){return 4500},idealEdgeLength:function(e){return 50},edgeElasticity:function(e){return.45},nestingFactor:.1,numIter:2500,tile:!0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravity:.25,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}},8482:(e,t,n)=>{var a=n(9058),o=n.n(a),i=n(9142),r=n.n(i),l=n(6053),c=n.n(l),s=n(4867),d=n.n(s),u=n(5658),f=n.n(u),g=n(2548),m=n.n(g),v=n(9755),p=n.n(v),h=n(9367),y=n(4936),w=n(6293),b=n(9866),S=n(9920);o().use(r()),o().use(c()),o().use(d()),o().use(f()),o().use(m());var C,E,x=[],k=L("/api/lists"),R=!1,D=!1,T=!1,j="",z=[],I={};function L(e){var t;return p().ajax({url:e,method:"GET",dataType:"json",headers:{Accept:"application/json",Authorization:"Bearer 8wXpW1R2NJ1kGk5LDUCmsmta0O4vuvjU5Y11HY5Z","Application-id":"SCAN_CYTOSCAPE"},async:!1,success:function(e){t=e},error:function(e){console.log(e)}}),t}function N(e){var t;return k.forEach((function(n){if(n.id===e)return t=n.displayed_value})),t}function O(e,t){if(e.elements().show(),t.isNode()){var n=t.union(t.component());e.elements().not(n).hide()}var a=e.elements().filter(":visible");e.fit(a,50)}x=L("/api/list/"+(C="ListRelation",k.forEach((function(e){e.name===C&&(E=e.id)})),E)),p().getJSON("/content.json",(function(e){new URLSearchParams(window.location.search);var t=[];t.push({selector:"node",style:{"background-color":"#666",label:"data(name)","font-size":25}}),t.push({selector:"edge",style:{width:3,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle","curve-style":"bezier"}}),x.forEach((function(e){t.push({selector:'edge[label = "'+e.name.eng+'"]',style:{"line-color":e.color,"target-arrow-color":e.color,"source-arrow-color":e.color}})})),t.push({selector:'edge[type = "bilateral"]',style:{"source-arrow-shape":"triangle",width:4}}),t.push({selector:".highlighted",style:{"background-color":"#ff0000","line-color":"#ff0000","target-arrow-color":"#ff0000","source-arrow-color":"#ff0000",label:"data(label)"}});var n=o()({container:document.getElementById("cy"),elements:e,style:t});n.layout(h.v).run(),r("dagre");var a={menuRadius:function(e){return 100},fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:!1,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1,outsideMenuCancel:!1,selector:"node",commands:[{content:"Set as FROM",select:function(e){p()("#from").val(e.id()),p()("#select2-from-container").attr("title",e.json().data.name).text(e.json().data.name),O(n,e)}},{content:"set as TO",select:function(e){p()("#to").val(e.id()),p()("#select2-to-container").attr("title",e.json().data.name).text(e.json().data.name),i()}},{content:"View information",select:function(e){window.location.replace("/person/"+e.id())}},{content:"View related persons",select:function(e){O(n,e)}},{content:"Save position",select:function(e){console.log(e.position())},enabled:!1}]};function i(){var e=p()("#from").val(),t=p()("#to").val();if(""==t)l();else if(""!=e)!function(e,t){l();var a=n.elements().dijkstra("#"+e,(function(e){return e.data("weight")}),!1).pathTo(n.$("#"+t)),o=0;!function e(){a[o].addClass("highlighted"),o<a.length&&(o++,setTimeout(e))}()}(e,t);else{var a;O(n,null!==(a=n.$id(t))&&void 0!==a?a:[])}}function r(e){p()("#layout").val(e),p()("#select2-layout-container").attr("title",e).text(e)}function l(){n.elements().removeClass("highlighted")}function c(){n.style().resetToDefault();var e=function(){var e=[],t=N(j);return z.forEach((function(n){var a,o,i,r=null!==(a=n.shape)&&void 0!==a?a:"diamond",l=n[t].eng,c=void 0;c=T?null!==(o=n.color)&&void 0!==o?o:"#"+(16777215*Math.random()<<0).toString(16):null!==(i=n.color)&&void 0!==i?i:I[l],I[l]=c;var s={selector:'node[type = "'+l+'"]',style:{"background-color":c,label:"data(name)","font-size":25,shape:r}};e.push(s)})),e}(),a=t.concat(e);n.style(a)}function s(){n.remove(n.elements()),n.add(e),p()("#from").val(""),p()("#select2-from-container").text("-- Select the first person --"),p()("#to").val(""),p()("#select2-to-container").text("-- Select the second person --"),c(),p()("#betweenness_centrality").text("Show centrality"),n.layout(h.v).run(),p()("#select2-layout-container").text("dagre")}n.cxtmenu(a),n.cxtmenu({selector:"core",commands:[{content:"Dagre layout",select:function(){r("dagre"),n.layout(h.v).run()}},{content:"Cise layout",select:function(){r("cise"),n.layout(y.v).run()}},{content:"Fcose layout",select:function(){r("fcose"),n.layout(w.v).run()}},{content:"Breadthfirst layout",select:function(){r("breadthfirst"),n.layout(b.v).run()}},{content:"AVSDF layout",select:function(){r("avsdf"),n.layout(S.v).run()}},{content:"Relation details",select:function(){(R=!R)?n.style().selector("edge").style("label","data(label)").update():n.style().selector("edge").style("label","").update()}}]}),n.cxtmenu({selector:"edge",commands:[{content:"Show detail",select:function(e){e.style("label",e.data("detail"))}},{content:"Hide detail",select:function(e){e.removeStyle("label")}},{content:"Edit relation",select:function(e){window.location.replace("/links/"+e.id()+"/edit")}}]}),window.$("#from").change((function(){var e;O(n,n.$id(null!==(e=p()(this).val())&&void 0!==e?e:[])),p()(this).blur()})),window.$("#to").change((function(){i(),p()(this).blur()})),window.$("#layout").change((function(){var e=p()(this).val();"dagre"==e?(r("dagre"),n.layout(h.v).run()):"cise"==e?(r("cise"),n.layout(y.v).run()):"fcose"==e?(r("fcose"),n.layout(w.v).run()):"breadthfirst"==e?(r("breadthfirst"),n.layout(b.v).run()):"avsdf"==e&&(r("avsdf"),n.layout(S.v).run()),p()(this).blur()})),window.$("#list").change((function(){var e,t;""!=p()(this).val()?(T=!0,j=p()(this).val(),z=L("/api/list/"+j),n.nodes().forEach((function(e){var t=window.persons[e.id()][window.field_list[j]];e.data("type",t)})),c(),e=N(j),t="",z.forEach((function(n){var a=n[e].eng,o=I[a];t+='<em class="fas fa-circle" style="color: '+o+'">'+a+"</em>"})),p()("#legendList").html(t),T=!1,p()(this).blur()):s()})),p()("#save").click((function(){var e=n.png(),t=document.createElement("a");t.href=e,t.download="graph.png",t.click()})),p()("#betweenness_centrality").click((function(){if(D=!D){var e=n.elements().bc();n.nodes().forEach((function(t){var n,a,o;t.data("bcn",e.betweennessNormalized(t)),t.style("background-color",((n=100*t.data("bcn"))>50?(a=255,o=Math.round(5.1*(100-n))):(o=255,a=Math.round(510-5.1*(100-n))),"#"+("000000"+(65536*a+256*o+0).toString(16)).slice(-6)))})),p()("#betweenness_centrality").text("Hide centrality")}else n.nodes().forEach((function(e){e.style("background-color",I[e.data("type")])})),p()("#betweenness_centrality").text("Show centrality")})),p()("#clear").click((function(){s()}))}))},9662:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[457,170,898],(()=>(t(9920),t(9866),t(4936),t(9367),t(6293),t(8482),t(9662))));e.O()}]);